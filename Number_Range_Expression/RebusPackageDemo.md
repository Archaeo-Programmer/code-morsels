---
title: "Generate a Regular Expression for a Number Range in R"
author: "Andrew Gillreath-Brown"
mainfont: Calibri
output:
  html_document:
    code_folding: show
    keep_md: yes
    number_sections: yes
    theme: sandstone
    toc: yes
    toc_depth: 3
    toc_float: yes
  pdf_document:
    toc: yes
    toc_depth: '3'
always_allow_html: yes
---

Not too long ago, I was trying to find a simple way to get files that were in a particular year range in R. I tried writing regular expressions, but these always failed.

However, I eventually stumbled upon the `rebus` package that could make this extremely easy. Here, I have created a very simple demo to show the function `number_range`, which will generate the regular expression.


```r
library(rebus)
```

Download the files and put them in your working directory. I simply named the folder “DummyFiles”.


```r
# Specify a directory for the dummy rtf files.
DUMMY.DIR <- "../Data/DummyFiles/"

# Get list of all file names in the dummy directory.
dummy.files <- list.files(paste0(DUMMY.DIR), recursive=T, full.names=T)

dummy.files
```

 [1] "../Data/DummyFiles//cai_tmin_us_us_30s_194501.rtf"
 [2] "../Data/DummyFiles//cai_tmin_us_us_30s_194601.rtf"
 [3] "../Data/DummyFiles//cai_tmin_us_us_30s_194701.rtf"
 [4] "../Data/DummyFiles//cai_tmin_us_us_30s_194811.rtf"
 [5] "../Data/DummyFiles//cai_tmin_us_us_30s_194901.rtf"
 [6] "../Data/DummyFiles//cai_tmin_us_us_30s_195001.rtf"
 [7] "../Data/DummyFiles//cai_tmin_us_us_30s_195101.rtf"
 [8] "../Data/DummyFiles//cai_tmin_us_us_30s_195201.rtf"
 [9] "../Data/DummyFiles//cai_tmin_us_us_30s_195301.rtf"
[10] "../Data/DummyFiles//cai_tmin_us_us_30s_195401.rtf"
[11] "../Data/DummyFiles//cai_tmin_us_us_30s_195501.rtf"
[12] "../Data/DummyFiles//cai_tmin_us_us_30s_195601.rtf"
[13] "../Data/DummyFiles//cai_tmin_us_us_30s_195701.rtf"
[14] "../Data/DummyFiles//cai_tmin_us_us_30s_195801.rtf"
[15] "../Data/DummyFiles//cai_tmin_us_us_30s_195901.rtf"
[16] "../Data/DummyFiles//cai_tmin_us_us_30s_196001.rtf"
[17] "../Data/DummyFiles//cai_tmin_us_us_30s_196101.rtf"
[18] "../Data/DummyFiles//cai_tmin_us_us_30s_196201.rtf"
[19] "../Data/DummyFiles//cai_tmin_us_us_30s_196301.rtf"

The regular expression, `rx`, that was generated by ‘number_range’ can now be used as the pattern in the ‘grep’ function and applied to the list of files.


```r
# Use the rebus package to generate a regular expression for a number range, 
# which will allow for the extraction of specific years in the dummy data (i.e., 1948-1956).
rx <- number_range(1948, 1956)

rx
```

<regex> (?:194[8-9]|195[0-6])

```r
# Now use the expression stored in rx, and trim list of files to to 1948:1956.
dummy.files <- grep(rx, dummy.files, value = TRUE, perl = TRUE)

dummy.files
```

[1] "../Data/DummyFiles//cai_tmin_us_us_30s_194811.rtf"
[2] "../Data/DummyFiles//cai_tmin_us_us_30s_194901.rtf"
[3] "../Data/DummyFiles//cai_tmin_us_us_30s_195001.rtf"
[4] "../Data/DummyFiles//cai_tmin_us_us_30s_195101.rtf"
[5] "../Data/DummyFiles//cai_tmin_us_us_30s_195201.rtf"
[6] "../Data/DummyFiles//cai_tmin_us_us_30s_195301.rtf"
[7] "../Data/DummyFiles//cai_tmin_us_us_30s_195401.rtf"
[8] "../Data/DummyFiles//cai_tmin_us_us_30s_195501.rtf"
[9] "../Data/DummyFiles//cai_tmin_us_us_30s_195601.rtf"
